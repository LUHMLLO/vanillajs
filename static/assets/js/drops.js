class Drops{getDrops(e=document.querySelectorAll("dropdown")){return[...e]}init(e=this.getDrops()){e.forEach((e=>{const t=e.querySelector("toggle");t&&(e.hasAttribute("initialized")||t.addEventListener("click",(t=>{t.preventDefault(),this.toggle(e)})),e.setAttribute("initialized",""))}));new MutationObserver((e=>{e.forEach((e=>{e.addedNodes.forEach((e=>{if(e instanceof Element){const t=e.querySelectorAll("dropdown");this.init([...t])}}))}))})).observe(document.documentElement,{childList:!0,subtree:!0})}toggle(e){if(!e)return;document.addEventListener("click",this.listenClicksOutside);const t=e.querySelector("[data-role=dropmenu]");t&&(this.toggleAdjacents(e),t.hasAttribute("open")?t.close():t.show(),t.open&&t.addEventListener("click",(e=>{e.preventDefault(),t.close()})),!t.hasAttribute("open")&&document.removeEventListener("click",this.listenClicksOutside))}toggleAdjacents(e){this.getDrops().forEach((t=>{const o=t.querySelector("[data-role=dropmenu]");e!==t&&o&&o.close()}))}listenClicksOutside=e=>{this.getDrops().forEach((t=>{const o=t.querySelector("[data-role=dropmenu]");o&&e.target instanceof Node&&!t.contains(e.target)&&o.hasAttribute("open")&&o.close()}))};constructor(){this.init()}}export{Drops as default};