class Drops{getDrops(e=document.querySelectorAll("dropdown")){return[...e]}init(e=this.getDrops()){e.forEach((e=>{const t=e.querySelector("toggle");t?(e.hasAttribute("initialized")||t.addEventListener("click",(t=>{t.preventDefault(),this.toggle(e)})),e.setAttribute("initialized","")):console.warn("Drops: Unable to find toggle inside dropdown.")}));new MutationObserver((e=>{e.forEach((e=>{e.addedNodes.forEach((e=>{if(e instanceof Element){const t=e.querySelectorAll("dropdown");this.init([...t])}}))}))})).observe(document.documentElement,{childList:!0,subtree:!0})}toggle(e){if(!e)return void console.warn("Drops: Unable to find dropdown.");document.addEventListener("click",this.listenClicksOutside);const t=e.querySelector("[data-role=dropmenu]");t?(this.toggleAdjacents(e),t.hasAttribute("open")?t.close():t.show(),t.open&&[...t.querySelectorAll("[data-trigger='close']")].forEach((e=>{e.addEventListener("click",(()=>{t.close()}))})),!t.hasAttribute("open")&&document.removeEventListener("click",this.listenClicksOutside)):console.warn("Drops: Unable to find dropmenu inside dropdown.")}toggleAdjacents(e){this.getDrops().forEach((t=>{const o=t.querySelector("[data-role=dropmenu]");e!==t&&o&&o.close()}))}listenClicksOutside=e=>{this.getDrops().forEach((t=>{const o=t.querySelector("[data-role=dropmenu]");o&&e.target instanceof Node&&!t.contains(e.target)&&o.hasAttribute("open")&&o.close()}))};constructor(){this.init()}}export{Drops as default};